<html>

  <head>
    <script async src="https://ssp.igaw.io/sdk/apsspads.js"></script>
    <style>
      .ad-banner {}

      .ad-native {
        height: 80px;
      }
    </style>
  </head>

  <body>
    <p>startBanner</p>
    <div id="startBanner" class="ad-banner"></div>
    <p>classTabBanner</p>
    <div id="classTabBanner" class="ad-banner"></div>
    <p>insightTabBanner</p>
    <div id="insightTabBanner" class="ad-banner"></div>
    <p>moreTabBanner</p>
    <div id="moreTabBanner" class="ad-banner"></div>
    <p>notiBanner</p>
    <div id="notiBanner" class="ad-banner"></div>
    <p>postNative</p>
    <div id="postNative" class="ad-native"></div>
    <p>classTalkNative</p>
    <div id="classTalkNative" class="ad-native"></div>
    <p>notiNative</p>
    <div id="notiNative" class="ad-native"></div>
  </body>

  <script>
    const ANDROID_APP_KEY = 'N256497692';
    const IOS_APP_KEY = 'N256497692';

    const DeviceType = {
      ANDROID: 'classting_android',
      IOS: 'classting_iphone',
    };

    const placementID = {
      startBannerAndroid: 'ZsytBTVlmEsGncC',
      classTabBannerAndroid: 'FDDJtGyANP9SCvO',
      insightTabBannerAndroid: 'ZPkQPzySErw5V9A',
      moreTabBannerAndroid: '6s4yzJoPcie21Yz',
      notiBannerAndroid: 'JoDQk2seGrDx0ta',
      startBannerIOS: 'tUuF2VsGb77rB9F',
      classTabBannerIOS: 'IcuXseZsidAQYi8',
      insightTabBannerIOS: 'RaJKyE4nkahUIP8',
      moreTabBannerIOS: 'xUPzBinjJ0Mu2SV',
      notiBannerIOS: 'GMhXVLGobYtqUq1',
      postNativeAndroid: 'lViRqs5grqXHbw9',
      classTalkNativeAndroid: 'SbZkG7WkiEFyTk1',
      notiNativeAndroid: 'VIT89RLZ2am3YQr',
      postNativeIOS: 'di6gllh0x0VaKG0',
      classTalkNativeIOS: 'M3faloe3AtW6tkn',
      notiNativeIOS: 'sXG66shkLnbncQd',
    };

    const adUnitID = {
      startBannerAndroid: 'Classting_Start_Banner_Android-N256497692',
      classTabBannerAndroid: 'Classting_ClassTAB_Banner_Android-N256497692',
      insightTabBannerAndroid: 'Classting_InsigtTAB_Banner_Android-N256497692',
      moreTabBannerAndroid: 'Classting_MoreTAB_Banner_Android-N256497692',
      notiBannerAndroid: 'Classting_Noti_Banner_Android-N256497692',
      startBannerIOS: 'Classting_Start_Banner_iOS-N256497692',
      classTabBannerIOS: 'Classting_ClassTAB_Banner_iOS-N256497692',
      insightTabBannerIOS: 'Classting_InsigtTAB_Banner_iOS-N256497692',
      moreTabBannerIOS: 'Classting_MoreTAB_Banner_iOS-N256497692',
      notiBannerIOS: 'Classting_Noti_Banner_iOS-N256497692',
      postNativeAndroid: 'Classting_Post_Native_Android-N256497692',
      classTalkNativeAndroid: 'Classting_Class_Talk_Native_Android-N256497692',
      notiNativeAndroid: 'Classting_Noti_Native_Android-N256497692',
      postNativeIOS: 'Classting_Post_Native_iOS-N256497692',
      classTalkNativeIOS: 'Classting_Class_Talk_Native_iOS-N256497692',
      notiNativeIOS: 'Classting_Noti_Native_iOS-N256497692',
    };

    const device = window.navigator.userAgent;
    const isAndroid = device.includes(DeviceType.ANDROID);
    const appKey = isAndroid ? ANDROID_APP_KEY : IOS_APP_KEY;

    var apsspads = window.apsspads || {
      cmd: []
    };
    apsspads.cmd.push(function() {
      apsspads.setConfig({
        pubId: appKey,
        nam: true
      });
      apsspads.defineAdUnits(    {
          code: "postNative",
          plcmtId: isAndroid ? placementID.postNativeAndroid : placementID.postNativeIOS,
          fallback: {
            nam: {
              adUnitId: isAndroid ? adUnitID.postNativeAndroid : adUnitID.postNativeIOS
            }
          }
        });
      apsspads.addEventListener("error", function(obj) { // 광고 미 노출 시 호출
        console.log('에러 :', obj); // {providerName: "apssp|nam", code: "banner", stat: 0}
      });
      apsspads.setClickHandler(function(code, curl) { // 광고 클릭 시 실행
				// code: 광고 노출 영역 (HTML Element)의 Id
				// curl: 클릭 URL
	      window.ReactNativeWebView.postMessage(JSON.stringify({
  category: 'navigation',
  type: 'open',
  payload: {
    url: curl,
  },
}));
				console.log(code, curl);
			});
      apsspads.requestBids();
    });
  </script>

</html>
